# 测试用例集

## 1. 正常流程
- 搜索镜像：输入 "nginx"，期望返回列表、分页信息。
- 加入下载队列：选择镜像 latest，创建任务返回 200 与 taskId。
- 下载进度：实时显示速度/剩余时间/百分比，完成后校验 checksum 字段存在。
- 历史记录：完成后写入历史，可按时间筛选并重新下载。

## 2. 边界条件
- 搜索为空：query 缺失，返回 400。
- 标签/架构筛选：组合筛选分页准确。
- 大文件阈值：size > 500MB 自动启用分块标志。
- 并行控制：设置最大并发 5，实际并行不超过设定值。

## 3. 异常处理
- 下载中断：暂停后恢复继续累计字节数。
- 分块失败重试：超过最大重试标记为 error，并保留失败信息。
- 取消任务：downloading→cancel 返回 200，任务转为 error。
- 删除任务：非 downloading 状态可删除，返回 200。

## 4. 安全与网络
- API 必要字段校验、错误码一致性。
- WebSocket 连接断开与重连、事件格式校验。

